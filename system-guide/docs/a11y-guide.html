<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../assets/style-guide.css">
  <title>접근성 유틸리티 가이드</title>
</head>
<body>
  <div class="container">
    <h1 class="t-title-1 guide-title">접근성 유틸리티 (a11y.js) 가이드</h1>
    
    <section class="guide-section">
      <h2 class="t-title-2 guide-title">개요</h2>
      
      <div class="guide-article">
        <p class="t-body-1">
          a11y.js는 웹 접근성 표준(WCAG)을 준수하는 키보드 접근성 기능을 제공하는 유틸리티 라이브러리입니다.
          이 라이브러리는 모달, 드롭다운, 셀렉트 등 다양한 컴포넌트에서 키보드 접근성을 쉽게 구현할 수 있도록 도와줍니다.
        </p>
        
        <div class="guide-notice">
          <strong>중요:</strong> 모든 컴포넌트에 접근성 기능을 적용하려면 a11y.js를 페이지에 포함해야 합니다.
        </div>
        
        <div class="guide-code-block">
          <pre><code>&lt;script src="../assets/scripts/common/a11y.js"&gt;&lt;/script&gt;</code></pre>
        </div>
      </div>
    </section>
    
    <section class="guide-section">
      <h2 class="t-title-2 guide-title">기본 기능</h2>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">포커스 트랩 (trapFocus)</h3>
        <p class="t-body-1">
          특정 컨테이너(예: 모달, 다이얼로그) 내에서 포커스가 순환하도록 제한하는 기능입니다.
          Tab 키를 누르면 컨테이너 내의 마지막 요소에서 첫 번째 요소로, Shift+Tab 키를 누르면 첫 번째 요소에서 마지막 요소로 포커스가 이동합니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>// 포커스 트랩 설정
const releaseFocusTrap = App.a11y.trapFocus(modalElement);
// 포커스는 자동으로 모달 내 첫 번째 포커스 가능한 요소로 이동합니다.

// 포커스 트랩 해제 (모달 닫을 때)
if (releaseFocusTrap) releaseFocusTrap();</code></pre>
        </div>
        
        <div class="guide-notice">
          <strong>중요:</strong> trapFocus 함수는 문서 전체에 이벤트 리스너를 추가하여 포커스가 지정된 컨테이너를 벗어나지 않도록 합니다.
          이벤트는 캡처 단계에서 처리되므로 다른 이벤트 핸들러보다 먼저 실행됩니다.
        </div>
      </div>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">목록 내 포커스 트랩 (trapFocusInList)</h3>
        <p class="t-body-1">
          드롭다운이나 셀렉트 컴포넌트와 같은 목록형 컴포넌트에서 Tab 키 이동을 관리합니다.
          목록 내에서 Tab 키로 이동할 때 목록을 벗어나는 경우 콜백 함수를 실행할 수 있습니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>// 목록 내 포커스 트랩 설정
const releaseListTrap = App.a11y.trapFocusInList(listElement, '.list-item', {
  onExit: (direction) => {
    // 목록을 벗어날 때 실행할 코드
    if (direction === 'forward') {
      // Tab 키로 앞으로 이동할 때
      closeList();
    } else if (direction === 'backward') {
      // Shift+Tab 키로 뒤로 이동할 때
      closeList();
    }
  }
});</code></pre>
        </div>
      </div>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">화살표 키 탐색 (arrowNavigation)</h3>
        <p class="t-body-1">
          목록 내에서 화살표 키(↑, ↓, ←, →)로 항목 간 이동을 지원합니다.
          Home 키와 End 키를 사용하여 첫 번째 항목과 마지막 항목으로 이동할 수도 있습니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>// 화살표 키 탐색 설정
const releaseArrowNav = App.a11y.arrowNavigation(listElement, '.list-item', {
  loop: true,       // 처음/끝에서 순환할지 여부
  horizontal: false, // 가로 방향 탐색 사용 여부
  onNavigate: (element, index) => {
    // 탐색 시 실행할 코드
    console.log(`항목 ${index}로 이동`);
  }
});</code></pre>
        </div>
      </div>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">펼침/접힘 컴포넌트 제어 (toggleExpandable)</h3>
        <p class="t-body-1">
          드롭다운, 아코디언과 같은 펼침/접힘 컴포넌트의 키보드 제어를 지원합니다.
          Enter, Space 키로 펼침/접힘을 토글하고, 화살표 키로 펼쳐진 목록을 탐색할 수 있습니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>// 펼침/접힘 컴포넌트 제어 설정
const releaseToggle = App.a11y.toggleExpandable(triggerElement, targetElement, {
  expandedClass: 'show',         // 펼쳐진 상태 클래스
  triggerActiveClass: 'active',  // 트리거 활성화 클래스
  onExpand: (trigger, target) => {
    // 펼쳐질 때 실행할 코드
    console.log('컴포넌트가 펼쳐짐');
  },
  onCollapse: (trigger, target) => {
    // 접힐 때 실행할 코드
    console.log('컴포넌트가 접힘');
  }
});</code></pre>
        </div>
      </div>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">Escape 키 처리 (escapeHandler)</h3>
        <p class="t-body-1">
          Escape 키를 누르면 컴포넌트를 닫거나 특정 동작을 실행하도록 합니다.
          모달, 드롭다운 등에서 Escape 키로 닫기 기능을 구현할 때 유용합니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>// Escape 키 처리 설정
const releaseEscHandler = App.a11y.escapeHandler(containerElement, () => {
  // Escape 키를 누를 때 실행할 코드
  closeModal();
}, triggerButton); // 닫은 후 포커스를 이동할 요소 (옵션)</code></pre>
        </div>
      </div>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">포커스 이동 감지 (handleFocusOut)</h3>
        <p class="t-body-1">
          특정 컨테이너에서 포커스가 벗어날 때 이벤트를 감지하고 처리합니다.
          드롭다운이나 메뉴에서 포커스가 밖으로 나갈 때 자동으로 닫히도록 할 때 유용합니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>// 포커스 이동 감지 설정
const releaseFocusOut = App.a11y.handleFocusOut(containerElement, () => {
  // 포커스가 컨테이너 밖으로 나갈 때 실행할 코드
  closeDropdown();
});</code></pre>
        </div>
      </div>
    </section>
    
    <section class="guide-section">
      <h2 class="t-title-2 guide-title">컴포넌트 초기화 기능</h2>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">드롭다운 컴포넌트 초기화 (initDropdown)</h3>
        <p class="t-body-1">
          드롭다운 컴포넌트에 필요한 모든 접근성 기능을 한 번에 설정합니다.
          버튼 클릭/키보드 이벤트, 목록 항목 선택, 포커스 관리 등이 포함됩니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>// 드롭다운 컴포넌트 초기화
document.addEventListener('DOMContentLoaded', function() {
  const dropdowns = document.querySelectorAll('.dropdown');
  dropdowns.forEach(dropdown => {
    App.a11y.initDropdown(dropdown);
  });
});</code></pre>
        </div>
      </div>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">다중 선택 컴포넌트 초기화 (initMultiSelect)</h3>
        <p class="t-body-1">
          다중 선택이 가능한 커스텀 셀렉트 컴포넌트에 필요한 접근성 기능을 설정합니다.
          옵션 선택/해제, 태그 생성/삭제, 키보드 탐색 등이 포함됩니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>// 다중 선택 컴포넌트 초기화
document.addEventListener('DOMContentLoaded', function() {
  const multiSelects = document.querySelectorAll('.select--multiple');
  multiSelects.forEach(multiSelect => {
    App.a11y.initMultiSelect(multiSelect);
  });
});</code></pre>
        </div>
      </div>
    </section>
    
    <section class="guide-section">
      <h2 class="t-title-2 guide-title">모범 사례</h2>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">리소스 관리</h3>
        <p class="t-body-1">
          모든 a11y.js 함수는 이벤트 리스너 제거 함수를 반환합니다.
          컴포넌트가 더 이상 필요하지 않을 때(예: 제거될 때) 이 함수를 호출하여 메모리 누수를 방지하세요.
        </p>
        
        <div class="guide-code-block">
          <pre><code>// 정리 함수 호출 예시
function destroyComponent() {
  if (releaseFocusTrap) releaseFocusTrap();
  if (releaseArrowNav) releaseArrowNav();
  if (releaseToggle) releaseToggle();
  // 기타 정리 코드...
}</code></pre>
        </div>
      </div>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">ARIA 속성 활용</h3>
        <p class="t-body-1">
          a11y.js는 기본적인 키보드 접근성을 제공하지만, 적절한 ARIA 속성을 함께 사용하면 스크린 리더 사용자에게 더 나은 경험을 제공할 수 있습니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>// ARIA 속성 예시
&lt;button aria-haspopup="true" aria-expanded="false" aria-controls="dropdown-menu"&gt;
  메뉴 열기
&lt;/button&gt;
&lt;div id="dropdown-menu" role="menu" aria-hidden="true"&gt;
  &lt;div role="menuitem" tabindex="-1"&gt;메뉴 항목 1&lt;/div&gt;
  &lt;div role="menuitem" tabindex="-1"&gt;메뉴 항목 2&lt;/div&gt;
&lt;/div&gt;</code></pre>
        </div>
      </div>
    </section>
    
    <section class="guide-section">
      <h2 class="t-title-2 guide-title">실제 사용 예시</h2>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">헤더 컴포넌트의 사이드 메뉴</h3>
        <p class="t-body-1">
          헤더 컴포넌트에서 사이드 메뉴를 열 때 포커스 트랩을 설정하는 예시입니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>function openNav() {
  nav.classList.add('is-open');
  App.overlay.open();
  nav.setAttribute('aria-hidden', 'false');
  nav.removeAttribute('inert');
  
  // 포커스 트랩 설정
  releaseFocusTrap = App.a11y.trapFocus(nav);
}

function closeNav() {
  nav.classList.remove('is-open');
  App.overlay.close();
  nav.setAttribute('aria-hidden', 'true');
  nav.setAttribute('inert', '');
  
  // 포커스 트랩 해제
  if (releaseFocusTrap) releaseFocusTrap();
}</code></pre>
        </div>
      </div>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">드롭다운 컴포넌트</h3>
        <p class="t-body-1">
          드롭다운 컴포넌트에 접근성 기능을 적용하는 예시입니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>document.addEventListener('DOMContentLoaded', function() {
  // 페이지의 모든 드롭다운 컴포넌트 초기화
  const dropdowns = document.querySelectorAll('.dropdown');
  dropdowns.forEach(dropdown => {
    App.a11y.initDropdown(dropdown);
  });
});</code></pre>
        </div>
      </div>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">다중 선택 셀렉트 컴포넌트</h3>
        <p class="t-body-1">
          다중 선택이 가능한 커스텀 셀렉트 컴포넌트에 접근성 기능을 적용하는 예시입니다.
        </p>
        
        <div class="guide-code-block">
          <pre><code>document.addEventListener('DOMContentLoaded', function() {
  // 기본 select 요소 이벤트 처리
  const selects = document.querySelectorAll('.select__element');
  selects.forEach(select => {
    // focus/blur 이벤트 처리
    // ...
  });
  
  // a11y.js를 활용한 다중 선택 컴포넌트 초기화
  const multiSelects = document.querySelectorAll('.select--multiple');
  multiSelects.forEach(multiSelect => {
    App.a11y.initMultiSelect(multiSelect);
  });
});</code></pre>
        </div>
      </div>
    </section>
  </div>
</body>
</html>
