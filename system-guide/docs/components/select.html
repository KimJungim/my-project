<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../../assets/style-guide.css">
	<title>Select</title>
</head>
<body>
  <div class="container container--no-header">
    <h1 class="t-title-1 guide-title">Select 컴포넌트</h1>
    
    <section class="guide-section">
      <h2 class="t-title-2 guide-title">기본 Select</h2>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">기본형</h3>
        <div class="guide-component-group">
          <div class="select">
            <select class="select__element">
              <option value="" disabled selected hidden>선택하세요</option>
              <option value="option1">관련도</option>
              <option value="option2">최신순</option>
              <option value="option3">오래된순</option>
              <option value="option4">인기순</option>
            </select>
          </div>
        </div>
        <div class="guide-code-block">
          <pre><code>&lt;div class="select"&gt;
  &lt;select class="select__element"&gt;
    &lt;option value="" disabled selected hidden&gt;선택하세요&lt;/option&gt;
    &lt;option value="option1"&gt;관련도&lt;/option&gt;
    &lt;option value="option2"&gt;최신순&lt;/option&gt;
    &lt;option value="option3"&gt;오래된순&lt;/option&gt;
    &lt;option value="option4"&gt;인기순&lt;/option&gt;
  &lt;/select&gt;
&lt;/div&gt;</code></pre>
        </div>
      </div>

      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">전체 너비형</h3>
        <div class="guide-component-group">
          <div class="select select--full-width">
            <select class="select__element">
              <option value="" disabled selected hidden>선택하세요</option>
              <option value="option1">옵션 1</option>
              <option value="option2">옵션 2</option>
              <option value="option3">옵션 3</option>
            </select>
          </div>
        </div>
        <div class="guide-code-block">
          <pre><code>&lt;div class="select select--full-width"&gt;
  &lt;select class="select__element"&gt;
    &lt;option value="" disabled selected hidden&gt;선택하세요&lt;/option&gt;
    &lt;option value="option1"&gt;옵션 1&lt;/option&gt;
    &lt;option value="option2"&gt;옵션 2&lt;/option&gt;
    &lt;option value="option3"&gt;옵션 3&lt;/option&gt;
  &lt;/select&gt;
&lt;/div&gt;</code></pre>
        </div>
      </div>

      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">그리드 시스템에 적용</h3>
        <p class="t-body-2">그리드 시스템 내에서 컬럼 너비에 맞게 자동으로 조정됩니다.</p>
        
        <div class="guide-notice">
          <p class="t-body-2">모바일: 4컬럼 / 태블릿: 8컬럼 / PC: 12컬럼 그리드 시스템에서 브레이크포인트에 따라 자동으로 너비가 조정됩니다.</p>
        </div>
        
        <h4 class="t-title-4 guide-subtitle">1/2 너비 Select 예시:</h4>
        <div class="grid grid-cols-4 md:grid-cols-8 lg:grid-cols-12">
          <div class="col-span-2 md:col-span-4 lg:col-span-6">
            <div class="fd-field">
              <label for="select-1" class="fd-field__lbl">컬럼 너비에 맞춘 Select</label>
              <div class="fd-field__ctrl fd-field__ctrl--select">
                <div class="select">
                  <select id="select-1" class="select__element">
                    <option value="" disabled selected hidden>컬럼 너비에 맞춘 Select</option>
                    <option value="option1">옵션 1</option>
                    <option value="option2">옵션 2</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="col-span-2 md:col-span-4 lg:col-span-6">
            <div class="fd-field">
              <label for="select-2" class="fd-field__lbl">컬럼 너비에 맞춘 Select</label>
              <div class="fd-field__ctrl fd-field__ctrl--select">
                <div class="select">
                  <select id="select-2" class="select__element">
                    <option value="" disabled selected hidden>컬럼 너비에 맞춘 Select</option>
                    <option value="option1">옵션 1</option>
                    <option value="option2">옵션 2</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="guide-code-block">
          <pre><code>&lt;div class="grid grid-cols-4 md:grid-cols-8 lg:grid-cols-12"&gt;
  &lt;div class="col-span-2 md:col-span-4 lg:col-span-6"&gt;
    &lt;div class="fd-field"&gt;
      &lt;label for="select-1" class="fd-field__lbl"&gt;컬럼 너비에 맞춘 Select&lt;/label&gt;
      &lt;div class="fd-field__ctrl fd-field__ctrl--select"&gt;
        &lt;div class="select"&gt;
          &lt;select id="select-1" class="select__element"&gt;
            &lt;option value="" disabled selected hidden&gt;컬럼 너비에 맞춘 Select&lt;/option&gt;
            &lt;option value="option1"&gt;옵션 1&lt;/option&gt;
            &lt;option value="option2"&gt;옵션 2&lt;/option&gt;
          &lt;/select&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class="col-span-2 md:col-span-4 lg:col-span-6"&gt;
    &lt;div class="fd-field"&gt;
      &lt;label for="select-2" class="fd-field__lbl"&gt;컬럼 너비에 맞춘 Select&lt;/label&gt;
      &lt;div class="fd-field__ctrl fd-field__ctrl--select"&gt;
        &lt;div class="select"&gt;
          &lt;select id="select-2" class="select__element"&gt;
            &lt;option value="" disabled selected hidden&gt;컬럼 너비에 맞춘 Select&lt;/option&gt;
            &lt;option value="option1"&gt;옵션 1&lt;/option&gt;
            &lt;option value="option2"&gt;옵션 2&lt;/option&gt;
          &lt;/select&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
        </div>
      </div>

      <h2 class="t-title-2 guide-title">다중 선택 컴포넌트</h2>
      
      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">기본형 (HTML 기본 다중 선택)</h3>
        <p class="t-body-2">브라우저 기본 UI를 활용한 다중 선택 컴포넌트입니다. JavaScript가 비활성화된 환경에서도 작동합니다.</p>
        
        <div class="guide-component-group">
          <div class="select">
            <select class="select__element" multiple>
              <option value="" disabled selected hidden>선택하세요</option>
              <option value="option1">옵션 1</option>
              <option value="option2">옵션 2</option>
              <option value="option3">옵션 3</option>
              <option value="option4">옵션 4</option>
              <option value="option5">옵션 5</option>
            </select>
          </div>
        </div>
        
        <div class="guide-code-block">
          <pre><code>&lt;div class="select"&gt;
  &lt;select class="select__element" multiple&gt;
    &lt;option value="" disabled selected hidden&gt;선택하세요&lt;/option&gt;
    &lt;option value="option1"&gt;옵션 1&lt;/option&gt;
    &lt;option value="option2"&gt;옵션 2&lt;/option&gt;
    &lt;option value="option3"&gt;옵션 3&lt;/option&gt;
    &lt;option value="option4"&gt;옵션 4&lt;/option&gt;
    &lt;option value="option5"&gt;옵션 5&lt;/option&gt;
  &lt;/select&gt;
&lt;/div&gt;</code></pre>
        </div>
      </div>

      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">커스텀형 UI (향상된 다중 선택)</h3>
        <p class="t-body-2">JavaScript를 활용한 향상된 다중 선택 컴포넌트로, 태그 형태의 선택 UI와 접근성을 제공합니다.</p>
        <p class="t-body-3">JavaScript가 비활성화된 환경에서는 기본 다중 선택으로 폴백됩니다.</p>
        
        <div class="guide-component-group">
          <div class="select select--multiple">
            <span id="select-label-1" class="visually-hidden">다중 선택 박스</span>
            <!-- 실제 select 요소 (JavaScript 비활성화 시 표시됨) -->
            <select class="select__native" multiple>
              <option value="option1">옵션 1</option>
              <option value="option2">옵션 2</option>
              <option value="option3">옵션 3</option>
              <option value="option4">옵션 4</option>
              <option value="option5">옵션 5</option>
              <option value="option6">매우 긴 텍스트의 옵션 이름이 있는 경우</option>
            </select>
            
            <!-- 커스텀 UI (JavaScript 활성화 시 표시됨) -->
            <div class="select__field" tabindex="0" role="button" aria-haspopup="listbox" aria-expanded="false" aria-controls="select-options-1" aria-labelledby="select-label-1">
              <span class="select__placeholder">항목을 선택해주세요</span>
              <!-- 선택된 항목들은 JavaScript로 여기에 태그로 추가됨 -->
            </div>
            <i class="select__arrow" aria-hidden="true"></i>
            
            <!-- 옵션 목록 -->
            <div id="select-options-1" class="select__options" role="listbox" aria-labelledby="select-label-1" aria-multiselectable="true">
              <div class="select__option" role="option" id="option1" data-value="option1" tabindex="-1" aria-selected="false">옵션 1</div>
              <div class="select__option" role="option" id="option2" data-value="option2" tabindex="-1" aria-selected="false">옵션 2</div>
              <div class="select__option" role="option" id="option3" data-value="option3" tabindex="-1" aria-selected="false">옵션 3</div>
              <div class="select__option" role="option" id="option4" data-value="option4" tabindex="-1" aria-selected="false">옵션 4</div>
              <div class="select__option" role="option" id="option5" data-value="option5" tabindex="-1" aria-selected="false">옵션 5</div>
              <div class="select__option" role="option" id="option6" data-value="option6" tabindex="-1" aria-selected="false">매우 긴 텍스트의 옵션 이름이 있는 경우</div>
            </div>
          </div>
        </div>
        <div class="guide-code-block">
          <pre><code>&lt;div class="select select--multiple"&gt;
  &lt;!-- 실제 select 요소 (JavaScript 비활성화 시 표시됨) --&gt;
  &lt;select class="select__native" multiple&gt;
    &lt;option value="option1"&gt;옵션 1&lt;/option&gt;
    &lt;option value="option2"&gt;옵션 2&lt;/option&gt;
    &lt;option value="option3"&gt;옵션 3&lt;/option&gt;
    &lt;option value="option4"&gt;옵션 4&lt;/option&gt;
    &lt;option value="option5"&gt;옵션 5&lt;/option&gt;
    &lt;option value="option6"&gt;매우 긴 텍스트의 옵션 이름이 있는 경우&lt;/option&gt;
  &lt;/select&gt;
  
  &lt;!-- 커스텀 UI --&gt;
  &lt;div class="select__field" tabindex="0" role="button" 
       aria-haspopup="listbox" aria-expanded="false" 
       aria-controls="select-options-1" aria-labelledby="select-label-1"&gt;
    &lt;span id="select-label-1" class="select__placeholder"&gt;항목을 선택해주세요&lt;/span&gt;
    &lt;!-- 선택된 항목들은 JavaScript로 여기에 태그로 추가됨 --&gt;
  &lt;/div&gt;
  &lt;div class="select__arrow" aria-hidden="true"&gt;&lt;/div&gt;
  &lt;div id="select-description" class="visually-hidden"&gt;다중 선택이 가능한 드롭다운 목록입니다. Enter 키를 눌러 옵션을 열고, 화살표 키로 이동한 후 Space 키로 선택하세요.&lt;/div&gt;
  
  &lt;!-- 옵션 목록 --&gt;
  &lt;div id="select-options-1" class="select__options" role="listbox"
       aria-labelledby="select-label"  aria-multiselectable="true"&gt;
    &lt;div class="select__option" role="option" id="option1" 
         data-value="option1" tabindex="-1" aria-selected="false"&gt;옵션 1&lt;/div&gt;
    &lt;div class="select__option" role="option" id="option2" 
         data-value="option2" tabindex="-1" aria-selected="false"&gt;옵션 2&lt;/div&gt;
    &lt;div class="select__option" role="option" id="option3" 
         data-value="option3" tabindex="-1" aria-selected="false"&gt;옵션 3&lt;/div&gt;
    &lt;div class="select__option" role="option" id="option4" 
         data-value="option4" tabindex="-1" aria-selected="false"&gt;옵션 4&lt;/div&gt;
    &lt;div class="select__option" role="option" id="option5" 
         data-value="option5" tabindex="-1" aria-selected="false"&gt;옵션 5&lt;/div&gt;
    &lt;div class="select__option" role="option" id="option6" 
         data-value="option6" tabindex="-1" aria-selected="false"&gt;매우 긴 텍스트의 옵션 이름이 있는 경우&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
        </div>
        
        <div class="guide-notice">
          <strong>중요:</strong> JavaScript 비활성화 환경 대응을 위해 visually-hidden 클래스는 JavaScript로 동적으로 추가됩니다. 이를 통해 JavaScript가 활성화되면 커스텀 UI가 사용되고, 비활성화되면 기본 select 요소가 표시됩니다.
        </div>
      </div>

      <h2 class="t-title-2 guide-title">JavaScript 기능</h2>
      <p class="guide-subtitle">셀렉트 컴포넌트의 동작을 위해 필요한 JavaScript 코드입니다. 접근성을 고려한 키보드 내비게이션과 스크린 리더 지원이 포함되어 있습니다.</p>

      <div class="guide-notice">
        <strong>참고:</strong> 아래 스크립트는 셀렉트 컴포넌트가 포함된 페이지에서 필요합니다. 기본 셀렉트의 경우 옵션 열기/닫기 동작 및 키보드 접근성이 구현되어 있고, 다중 선택형의 경우 a11y.js 유틸리티의 initMultiSelect 함수를 통한 초기화가 필요합니다.
      </div>
      
      <div class="guide-notice">
        <strong>키보드 접근성:</strong>
        <ul>
          <li><strong>Tab 키:</strong> 셀렉트 박스로 포커스 이동 (테두리 색상만 변경)</li>
          <li><strong>Enter / Space 키:</strong> 셀렉트 박스 활성화 및 옵션 표시 (화살표 아이콘 회전)</li>
          <li><strong>ESC 키:</strong> 열린 셀렉트 박스 닫기</li>
        </ul>
      </div>
      
      <div class="guide-code-block">
        <pre><code>&lt;!-- 접근성 유틸리티 스크립트 추가 --&gt;
&lt;script src="../../assets/scripts/common/a11y.js"&gt;&lt;/script&gt;

&lt;script&gt;
  document.addEventListener('DOMContentLoaded', function() {
    // 1. 기본 select 요소 이벤트 처리 (키보드 접근성 포함)
    const selects = document.querySelectorAll('.select__element');
    selects.forEach(select => {
      // 탭키로 들어온 경우 active 클래스 제거
      select.addEventListener('focus', function() {
        // 탭으로 포커스 이동 시 active 클래스 제거
        this.parentElement.classList.remove('active');
      });
      
      // blur 이벤트 - active 제거
      select.addEventListener('blur', function() {
        this.parentElement.classList.remove('active');
      });
      
      // 클릭 이벤트 - 액티브 토글만 처리
      select.addEventListener('click', function() {
        // 클릭 시 active 상태 토글 (브라우저 기본 동작은 그대로 실행)
        this.parentElement.classList.toggle('active');
      });
      
      // 키보드 이벤트 - 엔터/스페이스 키는 브라우저 기본 동작 유지
      select.addEventListener('keydown', function(e) {
        // 엔터키나 스페이스바 - 기본 동작 유지
        if (e.key === 'Enter' || e.key === ' ') {
          // 기본 동작 유지 (preventDefault 제거)
          // 액티브 클래스 추가
          this.parentElement.classList.add('active');
        }
        
        // ESC 키
        if (e.key === 'Escape') {
          this.parentElement.classList.remove('active');
        }
      });
      
      // 변경 이벤트 - 옵션 선택 후 active 제거
      select.addEventListener('change', function() {
        // 옵션 선택 후 active 제거
        this.parentElement.classList.remove('active');
      });
    });
    
    // 2. 다중 선택 컴포넌트 초기화 (a11y.js 사용)
    const multiSelects = document.querySelectorAll('.select--multiple');
    multiSelects.forEach(multiSelect => {
      // 네이티브 select 요소에 visually-hidden 클래스 추가
      const nativeSelect = multiSelect.querySelector('.select__native');
      if (nativeSelect) {
        nativeSelect.classList.add('visually-hidden');
      }
      
      // 커스텀 UI 초기화
      App.a11y.initMultiSelect(multiSelect);
    });
  });
&lt;/script&gt;</code></pre>
      </div>

      <div class="guide-article">
        <h3 class="t-title-3 guide-subtitle">a11y.js의 주요 기능</h3>
        <p>a11y.js 파일에는 셀렉트 컴포넌트의 접근성을 향상시키는 다양한 기능이 포함되어 있습니다:</p>
        <ul>
          <li>키보드 탐색 (화살표 키, Enter, Space, Escape)</li>
          <li>스크린 리더 지원 (ARIA 속성 관리)</li>
          <li>다중 선택 시 태그 생성 및 삭제</li>
          <li>포커스 관리</li>
          <li>옵션 선택 시 네이티브 select 요소와 동기화</li>
        </ul>
      </div>
    </section>
  </div>

  <script src="../../assets/scripts/common/a11y.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 1. 기본 select 요소 이벤트 처리 (키보드 접근성 포함)
      const selects = document.querySelectorAll('.select__element');
      selects.forEach(select => {
        // 탭키로 들어온 경우 active 클래스 제거
        select.addEventListener('focus', function() {
          // 탭으로 포커스 이동 시 active 클래스 제거
          this.parentElement.classList.remove('active');
        });
        
        // blur 이벤트 - active 제거
        select.addEventListener('blur', function() {
          this.parentElement.classList.remove('active');
        });
        
        // 클릭 이벤트 - 액티브 토글만 처리
        select.addEventListener('click', function() {
          // 클릭 시 active 상태 토글 (브라우저 기본 동작은 그대로 실행)
          this.parentElement.classList.toggle('active');
        });
        
        // 키보드 이벤트 - 엔터/스페이스 키는 브라우저 기본 동작 유지
        select.addEventListener('keydown', function(e) {
          // 엔터키나 스페이스바 - 기본 동작 유지
          if (e.key === 'Enter' || e.key === ' ') {
            // 기본 동작 유지 (preventDefault 제거)
            // 액티브 클래스 추가
            this.parentElement.classList.add('active');
          }
          
          // ESC 키
          if (e.key === 'Escape') {
            this.parentElement.classList.remove('active');
          }
        });
        
        // 변경 이벤트 - 옵션 선택 후 active 제거
        select.addEventListener('change', function() {
          // 옵션 선택 후 active 제거
          this.parentElement.classList.remove('active');
        });
      });
      
      // 2. 다중 선택 컴포넌트 초기화 (a11y.js 사용)
      const multiSelects = document.querySelectorAll('.select--multiple');
      multiSelects.forEach(multiSelect => {
        // 네이티브 select 요소에 visually-hidden 클래스 추가
        const nativeSelect = multiSelect.querySelector('.select__native');
        if (nativeSelect) {
          nativeSelect.classList.add('visually-hidden');
        }
        
        // 커스텀 UI 초기화
        App.a11y.initMultiSelect(multiSelect);
      });
    });
  </script>
</body>
</html>